webpackJsonp([14],{"0V2W":function(e,t){},AFDt:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("lC5x"),a=r.n(s),n=r("J0Oq"),o=r.n(n),i={data:function(){return{ruleForm:{phone:"",password:""},id:"",rules:{phone:[{required:!0,message:"请输入登录手机号",trigger:"change"},{min:11,max:11,message:"请输入11位手机号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}]}}},methods:{login:function(){var e,t=this;this.$refs.loginFormRef.validate((e=o()(a.a.mark(function e(r){var s,n,o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.get("/login/cellphone?phone="+t.ruleForm.phone+"&password="+t.ruleForm.password);case 4:if(502!==(s=e.sent).data.code){e.next=7;break}return e.abrupt("return",t.$message.error("密码错误，请重新输入！"));case 7:if(200!==s.data.code){e.next=17;break}t.$message.success("登录成功！"),t.id=s.data.account.id,n=s.data.token,o=s.data.cookie,t.$store.commit("setUserToken",n),t.$store.commit("setUserId",t.id),t.$store.commit("setCookie",o),e.next=18;break;case 17:return e.abrupt("return",t.$message.error("登录失败"));case 18:t.$router.push("/"),i={token:n,cookie:o,id:t.id},t.$bus.$emit("getUserData",i);case 21:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("div",{staticClass:"a"},[e._m(0),e._v(" "),r("div",{staticClass:"c"},[r("el-form",{ref:"loginFormRef",staticClass:"d",attrs:{model:e.ruleForm,rules:e.rules}},[r("h1",[e._v("登录界面")]),e._v(" "),r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{staticClass:"e",attrs:{type:"text",placeholder:"输入网易云音乐手机号","prefix-icon":"el-icon-user-solid",autofocus:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{staticClass:"e",attrs:{type:"password",placeholder:"输入密码","prefix-icon":"el-icon-unlock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),r("el-button",{staticClass:"f",attrs:{title:"无法使用"}},[e._v("忘记密码?")]),e._v(" "),r("el-button",{staticClass:"f",attrs:{title:"无法使用"}},[e._v("注册")]),e._v(" "),r("el-button",{staticClass:"g",on:{click:e.login}},[e._v(" 登录 ")])],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"b"},[t("img",{attrs:{src:r("z6lS"),alt:""}})])}]};var u=r("C7Lr")(i,l,!1,function(e){r("0V2W")},"data-v-458d10dc",null);t.default=u.exports}});
//# sourceMappingURL=14.bb6fd504d30899981c9c.js.map