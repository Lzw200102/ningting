webpackJsonp([8],{"ON+D":function(t,a){},aYK0:function(t,a){},wjQl:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("lC5x"),s=e.n(n),i=e("J0Oq"),r=e.n(i),l=e("SNiF"),c={data:function(){return{featureRanking:[],featureRankingglobal:[]}},methods:{getniceSongList:function(){var t=this;Object(l.g)().then(function(a){t.featureRanking=a.list.slice(0,4),t.featureRankingglobal=a.list.slice(4,29)})},gotolistdetails:function(t,a){this.$router.push({name:"leaderboardDetails",query:{id:t}})}},mounted:function(){this.getniceSongList()}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"leaderboard"},[e("el-aside",[e("h4",{staticClass:"h4"},[t._v("排行榜单")]),t._v(" "),e("ui",{staticClass:"ui"},[t._l(t.featureRanking,function(a,n){return e("li",{key:n,staticClass:"list",on:{click:function(e){return t.gotolistdetails(a.id,a.playCount)}}},[e("div",{staticClass:"list-img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.coverImgUrl+"?param=150y150",expression:"v.coverImgUrl + '?param=150y150'"}],attrs:{alt:""}})]),t._v(" "),e("div",{staticClass:"list-title"},[e("h4",[t._v(t._s(a.name))]),t._v(" "),e("h6",[t._v(t._s(a.updateFrequency))])])])}),t._v(" "),t._l(t.featureRankingglobal,function(a,n){return e("li",{key:"list"+n,staticClass:"list",on:{click:function(e){return t.gotolistdetails(a.id,a.playCount)}}},[e("div",{staticClass:"list-img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.coverImgUrl+"?param=150y150",expression:"v2.coverImgUrl + '?param=150y150'"}],attrs:{alt:""}})]),t._v(" "),e("div",{staticClass:"list-title"},[e("h4",[t._v(t._s(a.name))]),t._v(" "),e("h6",[t._v(t._s(a.updateFrequency))])])])})],2)],1),t._v(" "),e("router-view")],1)},staticRenderFns:[]};var u=e("C7Lr")(c,o,!1,function(t){e("aYK0")},"data-v-677493d9",null).exports,g=e("3+pe"),d=e("eAv8"),p={components:{leaderboard:u},inject:["reload"],data:function(){return{update:!0,rankingId:void 0===this.$route.query.id?19723756:this.$route.query.id,playCount:"",rankingname:"",rankingdescription:"",rankingPic:"",rankingavatarUrl:"",nickname:"",updateTime:"",subscribedCount:"",song_list_message:"",SongListSharing:"",getSongCollectorpic:"",Songcontent:"",trackslength:"",playlists:""}},watch:{$route:"getPath",rankingId:function(){}},filters:{GetPlayCount:function(t){return t>=1e4?Math.floor(t/1e4)+"w":t},GetTime:function(t){return Object(g.b)(t)},GetCommonTime:function(t){return Object(g.a)(t)},GetPic:function(t){return t.picUrl?t.picUrl+"?param=130y130":t.coverImgUrl+"?param=130y130"}},methods:{getPath:function(){console.log(1111),console.log(this.rankingId),this.reload()},getSongDetails:function(){var t=this;return r()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("/playlist/detail?id="+t.rankingId);case 2:if(200===(e=a.sent).status){a.next=5;break}return a.abrupt("return",t.$message.error("获取失败！"));case 5:t.playCount=e.data.playlist.playCount,t.rankingname=e.data.playlist.name,t.rankingdescription=e.data.playlist.description,t.rankingPic=e.data.playlist.coverImgUrl,t.rankingavatarUrl=e.data.playlist.creator.avatarUrl,t.nickname=e.data.playlist.creator.nickname,t.updateTime=e.data.playlist.updateTime,t.subscribedCount=e.data.playlist.subscribedCount,t.trackslength=e.data.playlist.tracks.length,console.log(t.updateTime);case 15:case"end":return a.stop()}},a,t)}))()},getsongListSharing:function(){var t=this;return r()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("/playlist/detail/dynamic?id="+t.rankingId);case 2:if(200===(e=a.sent).status){a.next=5;break}return a.abrupt("return",t.$message.error("获取失败！"));case 5:t.SongListSharing=e.data.shareCount,t.song_list_message=e.data.commentCount;case 7:case"end":return a.stop()}},a,t)}))()},getSongCollector:function(){var t=this;return r()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("/playlist/subscribers?id="+t.rankingId+"&limit=27");case 2:if(200===(e=a.sent).status){a.next=5;break}return a.abrupt("return",t.$message.error("获取失败！"));case 5:t.getSongCollectorpic=e.data.subscribers;case 6:case"end":return a.stop()}},a,t)}))()},getSongcontent:function(){var t=this;return r()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("/playlist/detail?id="+t.rankingId);case 2:if(200===(e=a.sent).status){a.next=5;break}return a.abrupt("return",t.$message.error("获取失败！"));case 5:console.log("歌单内容"),console.log(e.data),t.Songcontent=e.data.playlist.tracks;case 8:case"end":return a.stop()}},a,t)}))()},playMusic:function(t){var a=this;Object(d.a)(t).then(function(e){a.$bus.$emit("getMusicMessage",{musicdata:e,id:t});var n={picUrl:e.picUrl,Singer:e.Singer,picname:e.picname};a.$store.commit("setMusicData",n)})},songDetails:function(t){this.$router.push({name:"SongDetails",query:{id:t}})},getSongLikeness:function(){var t=this;return r()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("/related/playlist?id="+t.rankingId);case 2:e=a.sent,t.playlists=e.data.playlists;case 4:case"end":return a.stop()}},a,t)}))()},gotolikeness:function(t){this.$router.push("/rankingdetails/"+t)}},mounted:function(){console.log("date"+this.rankingId),this.getSongDetails(),this.getsongListSharing(),this.getSongcontent(),this.getSongLikeness(),this.getSongCollector()}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.update?e("div",{staticClass:"content"},[e("el-container",[e("leaderboard"),t._v(" "),e("el-main",[e("div",{staticClass:"ranking-list"},[e("el-row",[e("el-col",{attrs:{span:5}},[e("div",{staticClass:"grid-content bg-purple"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.rankingPic,expression:"rankingPic"}],staticClass:"ranking-list-img",attrs:{alt:""}})])]),t._v(" "),e("el-col",{attrs:{span:19}},[e("div",{staticClass:"grid-content bg-purple-light"},[e("div",{staticClass:"ranking-list-flex "},[e("h3",[t._v(t._s(t.rankingname))]),t._v(" "),e("span",{staticClass:"el-icon-time",staticStyle:{padding:"20px 0 0"}},[t._v("\n                  最近更新："+t._s(t._f("GetCommonTime")(t.updateTime))+"\n                ")]),t._v(" "),e("h6",{staticStyle:{padding:"10px 0 20px"}},[t._v("\n                  ("+t._s(t.rankingdescription)+")\n                ")]),t._v(" "),e("div",{staticClass:"ranking-list-an",staticStyle:{padding:"15px 0 0"}},[e("el-button",[t._v("播放")]),e("el-button",[t._v("添加")]),e("el-button",[t._v("收藏("+t._s(t.subscribedCount)+")")]),e("el-button",[t._v("分享("+t._s(t.SongListSharing)+")")]),e("el-button",[t._v("下载")]),e("el-button",[t._v("留言板("+t._s(t.song_list_message)+")")])],1)])])])],1)],1),t._v(" "),e("div",{staticClass:"ranking-list-title"},[e("el-row",{staticClass:"ranking-list-title-row",attrs:{gutter:20}},[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"},[e("span",[t._v("歌曲列表")])])]),t._v(" "),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-purple"},[e("h6",{staticStyle:{margin:"0",float:"left",color:"#f888"}},[t._v("\n                歌曲:"+t._s(t.trackslength)+"首\n              ")])])]),t._v(" "),e("el-col",{attrs:{span:18}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{float:"right"}},[t._v("\n              播放次数: "),e("span",{staticStyle:{color:"#f888"}},[t._v(t._s(t.playCount))]),t._v(" 次\n            ")])])],1),t._v(" "),e("el-row",{staticClass:"ranking-list-row",attrs:{gutter:20}},[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"grid-content bg-purple"},[t._v("排名")])]),t._v(" "),e("el-col",{attrs:{span:10}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{float:"left"}},[t._v("\n              歌曲名称\n            ")])]),t._v(" "),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"grid-content bg-purple"},[t._v("时间")])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{float:"left"}},[t._v("\n              歌手\n            ")])])],1),t._v(" "),e("ul",t._l(t.Songcontent,function(a,n){return e("li",{key:n},[e("el-row",{staticClass:"ranking-list-row play-click",attrs:{gutter:20}},[e("div",[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"grid-content bg-purple",on:{click:function(e){return t.playMusic(a.id)}}},[t._v("\n                    "+t._s(n+1)+"\n                  ")])]),t._v(" "),e("el-col",{attrs:{span:10}},[e("div",{staticClass:"grid-content bg-purple",staticStyle:{float:"left"},on:{click:function(e){return t.songDetails(a.id)}}},[e("div",{staticClass:"list-songName"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.al.picUrl,expression:"song.al.picUrl"}],staticStyle:{height:"45px",width:"45px","border-radius":"10px"},attrs:{alt:""}}),t._v(" "),e("div",{staticClass:"el-icon-video-play",staticStyle:{"font-size":"20px",margin:"0 20px"}}),t._v(" "),e("div",[e("span",[t._v(t._s(a.name))])])])])]),t._v(" "),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"grid-content bg-purple"},[t._v("\n                    "+t._s(t._f("GetTime")(a.dt))+"\n                  ")])]),t._v(" "),e("el-col",{attrs:{span:6}},t._l(a.ar,function(a,n){return e("div",{key:n,staticClass:"grid-content bg-purple",staticStyle:{float:"left"}},[t._v("\n                    "+t._s(a.name)+"\n                  ")])}),0)],1)])],1)}),0)],1)])],1)],1):t._e()},staticRenderFns:[]};var m=e("C7Lr")(p,v,!1,function(t){e("ON+D")},"data-v-03e832f8",null);a.default=m.exports}});
//# sourceMappingURL=8.52b290e3bfd82cd96245.js.map